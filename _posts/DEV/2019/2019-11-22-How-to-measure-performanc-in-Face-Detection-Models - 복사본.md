---
layout: post
title: "물체 검출 알고리즘의 성능 평가법"
categories: DEV
date: 2019-11-22
lastmod : 2019-11-22 09:00:00
sitemap :
changefreq : daily
priority : 1.0
---

<center><span style="color:red">본 글은 참고 원문을 요약한 글임을 밝혀둡니다.</span></center>
<br>

안녕하세요. 코딩벅스입니다. 

물체 검출 알고리즘들, 그 종류가 너무 많습니다. 얼굴 검출, 차량 검출 등등.. 이러한 수 많은 알고리즘들의 성능, 어떻게 매길까요? 여기서 성능이란 건, 속도가 아닌 검출율을 의미합니다. 물체 검출 알고리즘의 성능 평가가 어떻게 이루어지는지 이해하기 위해서는, 한가지 짚고 넘어가야할 부분이 있습니다. "물체 검출이 잘 된다"라는 말이 가지는 정확한 기준이 필요하죠. 



 한 예로, A라는 얼굴 검출 알고리즘을 만든 장본인들이 자신들의 기술은 검출율 100%라고 소개합니다. 그런데 알고보니 사진 1장에 존재하는 1명의 사람에 대해서 얼굴을 검출해 내었지만, 얼굴이 아닌 엉뚱한 물건 5개도 검출해버리는 상황이 발생한 것이죠. 사람 얼굴 검출에는 성공했으니 이들의 주장은 맞는 말이라고 봐야할까요? 글쎄요.  오검출이 많으니 결코 좋은 알고리즘이라고 보기는 어려울 것 같네요. 이렇듯, "특정 물체를 잘 검출해낸다"라는 것이 성능 평가의 잣대로 사용하기에는 많이 부족합니다. 



그래서 보다 학술적이며 정량적인 성능 평가 개념이 필요합니다. 이를 위해, 두가지 용어를 필히 알고 넘어가야합니다. 



* Precision
* Recall



 Recall, 직역하면 재현률이라고 하는 이 용어는 정답 가운데서, 검출에 성공한 결과에 대한 비율입니다. Precision은 알고리즘이 검출한 결과에서, 과연 정답이 차지하는 비율입니다. 예를 들어서, 한장의 사진에 3명의 사람 얼굴이 존재한다고 할 때, B라는 알고리즘이 검출한 결과, 총 5개의 얼굴을 검출했다고 나왔습니다. 이 결과들 가운데 실제 얼굴은 2개, 나머지 3개는 오답이라고 보겠습니다. 과연 Recall 과 Precision은 어떻게 나올까요? Recall은 2 / 3 = 0.66, Precision은 2 / 5 = 0.4가 나오는 것이죠. 결론적으로 A 알고리즘의 검출 성능은 학술적으로 표현할 때, Recall 은 0.66이고 Precision은 0.4라고 표현합니다. 



 이정도면 얼굴 검출 성능의 지표인 두가지 용어는 충분히 이해하셨다고 생각하겠습니다. 그렇다면, 얼굴 검출에서 맞췄다, 아니면 실패했다의 판단 기준은 무엇일까요? 얼굴 검출이라는 것이, 사진에서 영역을 찾는 것이기에 단순히 Yes 또는 No로 답하는 문제는 아닙니다. 그렇다면, A라는 얼굴 검출 알고리즘이 뱉어놓은 결과는 영역에 대한 좌표일 것이고, 이 영역이 정답과 가까움을 나타내는 지표가 있어야할 것입니다. 이때 사용되는 지표가 바로 IoU(Area of Intersection / Area of Union)입니다. 즉, 정답 영역과 검출된 영역의 겹쳐지는 비율을 가지고 판단하는 것이죠. 



보통 IoU가 0.5, 즉 검출된 영역이 실제 정답과 겹쳐지는 비율이 50% 이상인 경우를 정답으로 봅니다. 물론, 이는 상황마다 달리지기도 합니다. 



이제 정량적으로 두 알고리즘 간의 성능을 비교하는 방법을 살펴보죠. 앞에서 설명한, Precision과 Recall을 가지고 대략적으로 해당 알고리즘이 어느정도의 성능을 가진 것이 파악은 가능합니다. 하지만, 비교 우위를 판단하려면 뭔가 대표 점수가 있어야합니다. 이때 사용되는 정량적 단위가 바로 AP(Average Precision)입니다. 



![][2]



위 그림에서 AP가 나타나고 있습니다. 바로, Precision-Recall 상간관계 그래프에서 차지하는 면적이 바로 AP입니다. 

공인된 그리고 공개된 얼굴 검출 테스트 대상 가운데 하나가 바로 **WIDER Face Dataset**이며, 

32,203개 이미지에 393,703개의 레이블이 붙은 데이터 셋입니다. 





## References

[1]: https://seongkyun.github.io/study/2019/03/25/face_detection/

[2]: https://t1.daumcdn.net/cfile/tistory/220E10365869F5CA34
[3]: https://bskyvision.com/465